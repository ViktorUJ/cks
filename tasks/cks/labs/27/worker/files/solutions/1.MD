# Solution

- check cilum configuration
``` 
# ssh to control-plane  node
cilium config view
```
``` 
......
mesh-auth-enabled                                 true
......
mesh-auth-mutual-enabled                          true
......
```

- check cilium exist policy
- create new cilium policy with access from ingress-nginx to myapp
- 

1.Develop cilium network policy

```yml
apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: "allow-access-from-nginx-pod"
  namespace: "myapp"
spec:
  endpointSelector:
    matchLabels:
      run: app
  ingress:
  - fromEndpoints:
    - matchLabels:
        "k8s:io.kubernetes.pod.namespace": ingress-nginx
    toPorts:
    - ports:
      - port: "8080"
        protocol: TCP
    authentication:
      mode: "required"
```

2.Important here to have installed cilium with those two options(this is already preconfigured in this lab environment):

```sh
cilium install --version $cur_ver --set authentication.mutual.spire.enabled=true --set authentication.mutual.spire.install.enabled=true
```

``` 
check_result
```
```
 ✓ 0 Init  
 ✓ 1.1 Check if ingress rule is working
 ✓ 1.2 Check if mtls enabled

3 tests, 0 failures
 result = 100.00 %   ok_points=2  all_points=2  
```