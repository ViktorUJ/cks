# Task 12: ServiceEntry with STATIC Resolution

```bash
kubectl config use-context cluster3-admin@cluster3

# Get k8s worker node IP
NODE_IP=$(kubectl get nodes --context cluster3-admin@cluster3 -o jsonpath='{.items[0].status.addresses[?(@.type=="InternalIP")].address}')

kubectl apply -f - <<EOF
apiVersion: networking.istio.io/v1
kind: ServiceEntry
metadata:
  name: nginx-test
  namespace: turquoise
spec:
  hosts:
  - nginx-test.ica
  addresses:
  - 240.240.0.100
  location: MESH_INTERNAL
  resolution: STATIC
  ports:
  - number: 8082
    name: http
    protocol: HTTP
  endpoints:
  - address: ${NODE_IP}
---
apiVersion: networking.istio.io/v1
kind: VirtualService
metadata:
  name: nginx-test-vs
  namespace: turquoise
spec:
  hosts:
  - nginx-test.ica
  http:
  - route:
    - destination:
        host: nginx-test.ica
        port:
          number: 8082
EOF
```

## Testing

```bash
kubectl exec -n turquoise sleep-turquoise-test -- curl -sS http://240.240.0.100:8082
```
